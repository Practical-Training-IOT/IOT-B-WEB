/*! 
 Build based on gin-vue-admin 
 Time : 1746843967000 */
import{a as e,M as a,r as l,g as t,N as r,c as i,o,e as d,b as s,d as u,f as n,w as c,F as p,i as v,h as m,m as g,D as _,t as f,I as b,v as y,R as h,S as w,P as C,E as k}from"./087AC4D233B64EB0index.CO5TVuii.js";import{_ as V}from"./087AC4D233B64EB0resources.1e83Uicw.js";import{g as B,f as A,c as D,u as z,d as E}from"./087AC4D233B64EB0drivers.DmuE4pZk.js";import{_ as T}from"./087AC4D233B64EB0rich-edit.ylmqdvQl.js";import{_ as U}from"./087AC4D233B64EB0rich-view.B-1ov_xT.js";import{u as x}from"./087AC4D233B64EB0btnAuth.C6tLskk0.js";import"./087AC4D233B64EB0image.DZXThNBc.js";const I={class:"gva-search-box"},j={class:"gva-table-box"},S={class:"gva-btn-list"},q={key:0},P={class:"gva-pagination"},F={class:"flex justify-between items-center"},M={class:"text-lg"},N={key:0},R={key:0},G={class:"protocol-cards-container"},H=["onClick"],J={class:"protocol-header"},K={class:"protocol-actions"},O={class:"protocol-content"},Q=["src","alt"],Y={class:"protocol-name"},W={class:"protocol-footer"},L=Object.assign({name:"Drivers"},{__name:"drivers",setup(L){const X=x(),Z=e(!1),$=a(),ee=e(!1),ae=e([]),le=e([]),te=e({driver_name:"",driver_type:"1",mirror_number:"",agreement:"",mirror_address:"",driver_identification:"",version:"",description:"",test_false:"3"}),re=l({driver_name:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],agreement:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],mirror_address:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],driver_identification:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],version:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),ie=l({CreatedAt:[{validator:(e,a,l)=>{pe.value.startCreatedAt&&!pe.value.endCreatedAt?l(new Error("请填写结束日期")):!pe.value.startCreatedAt&&pe.value.endCreatedAt?l(new Error("请填写开始日期")):pe.value.startCreatedAt&&pe.value.endCreatedAt&&(pe.value.startCreatedAt.getTime()===pe.value.endCreatedAt.getTime()||pe.value.startCreatedAt.getTime()>pe.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),oe=e(),de=e(),se=e(1),ue=e(0),ne=e(10),ce=e([]),pe=e({}),ve=()=>{pe.value={},fe()},me=()=>{var e;null==(e=de.value)||e.validate((async e=>{e&&(se.value=1,fe())}))},ge=e=>{ne.value=e,fe()},_e=e=>{se.value=e,fe()},fe=async()=>{const e=await B({page:se.value,pageSize:ne.value,...pe.value});0===e.code&&(ce.value=e.data.list,ue.value=e.data.total,se.value=e.data.page,ne.value=e.data.pageSize)};fe();(async()=>{ae.value=await w("drive_type"),le.value=await w("gatewayProtocol")})();const be=e([]),ye=e=>{be.value=e},he=e(""),we=async e=>{0===(await E({ID:e.ID})).code&&(k({type:"success",message:"删除成功"}),1===ce.value.length&&se.value>1&&se.value--,fe())},Ce=e(!1),ke=()=>{Ce.value=!1,te.value={driver_name:"",driver_type:"1",mirror_number:"",agreement:"",mirror_address:"",driver_identification:"",version:"",description:"",test_false:"3"}},Ve=async()=>{var e;Z.value=!0,null==(e=oe.value)||e.validate((async e=>{if(!e)return Z.value=!1;let a;switch(he.value){case"create":default:a=await D(te.value);break;case"update":a=await z(te.value)}Z.value=!1,0===a.code&&(k({type:"success",message:"创建/更改成功"}),ke(),fe())}))},Be=e({}),Ae=e(!1),De=async e=>{const a=await A({ID:e.ID});0===a.code&&(Be.value=a.data,Ae.value=!0)},ze=()=>{Ae.value=!1,Be.value={}},Ee=e([{name:"GB28181协议驱动",icon:"/assets/087AC4D233B64EB0gb28181.BewHYrpR.png",type:"gb28181"},{name:"MODBUS TCP协议驱动",icon:"/assets/087AC4D233B64EB0modbus.DsNuaBn8.png",type:"modbus"},{name:"TCP协议驱动",icon:"/assets/087AC4D233B64EB0tcp.-S6VJgio.png",type:"tcp"},{name:"HTTP协议驱动",icon:"/assets/087AC4D233B64EB0http.Dplsvv8N.png",type:"http"},{name:"MQTT协议驱动",icon:"/assets/087AC4D233B64EB0mqtt.CIcbw_YC.png",type:"mqtt"}]);return(e,a)=>{const l=t("el-input"),w=t("el-form-item"),k=t("el-button"),B=t("el-form"),D=t("el-radio-button"),z=t("el-radio-group"),E=t("el-table-column"),x=t("InfoFilled"),L=t("el-icon"),fe=t("el-table"),be=t("el-pagination"),Te=t("el-option"),Ue=t("el-select"),xe=t("el-drawer"),Ie=t("el-descriptions-item"),je=t("el-descriptions"),Se=r("auth");return o(),i("div",null,[a[29]||(a[29]=d('<div class="page-header"><div class="page-header-content"><div class="page-header-title"><h2>驱动镜像</h2><p>驱动镜像是用户编写程序最终打包成可下载的docker镜像，它是实体设备与物联网平台通讯的桥梁，所有的设备数据和控制指令由物联网平台下发给驱动。</p></div><div class="page-header-image"><img src="'+V+'" alt="资源管理背景图"></div></div></div>',1)),s("div",I,[n(B,{ref_key:"elSearchFormRef",ref:de,inline:!0,model:pe.value,class:"demo-form-inline",rules:ie,onKeyup:g(me,["enter"])},{default:c((()=>[n(w,{label:"驱动名称",prop:"driver_name"},{default:c((()=>[n(l,{modelValue:pe.value.driver_name,"onUpdate:modelValue":a[0]||(a[0]=e=>pe.value.driver_name=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),ee.value?(o(),i(p,{key:0},[],64)):u("",!0),n(w,null,{default:c((()=>[n(k,{type:"primary",icon:"search",onClick:me},{default:c((()=>a[15]||(a[15]=[m("查询")]))),_:1}),n(k,{icon:"refresh",onClick:ve},{default:c((()=>a[16]||(a[16]=[m("重置")]))),_:1}),ee.value?(o(),v(k,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:a[2]||(a[2]=e=>ee.value=!1)},{default:c((()=>a[18]||(a[18]=[m("收起")]))),_:1})):(o(),v(k,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:a[1]||(a[1]=e=>ee.value=!0)},{default:c((()=>a[17]||(a[17]=[m("展开")]))),_:1}))])),_:1})])),_:1},8,["model","rules"])]),s("div",j,[s("div",null,[n(w,{label:"驱动类型:",prop:"driver_type"},{default:c((()=>[n(z,{modelValue:te.value.driver_type,"onUpdate:modelValue":a[3]||(a[3]=e=>te.value.driver_type=e),style:{width:"100%"}},{default:c((()=>[(o(!0),i(p,null,_(ae.value.slice(0,2),((e,a)=>(o(),v(D,{key:a,label:e.value},{default:c((()=>[m(f(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),s("div",S,[b((o(),v(k,{type:"primary",icon:"plus",onClick:a[4]||(a[4]=e=>(he.value="create",void(Ce.value=!0)))},{default:c((()=>a[19]||(a[19]=[m("新增")]))),_:1})),[[Se,y(X).add]])]),"1"===te.value.driver_type?(o(),i("div",q,[n(fe,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ce.value,"row-key":"ID",onSelectionChange:ye},{default:c((()=>[n(E,{type:"selection",width:"55"}),n(E,{align:"left",label:"镜像编号",prop:"mirror_number",width:"370"}),n(E,{align:"left",label:"驱动名称",prop:"driver_name",width:"120"}),n(E,{align:"left",label:"驱动类型",prop:"driver_type",width:"120"},{default:c((e=>[m(f(y(h)(e.row.driver_type,ae.value)),1)])),_:1}),n(E,{align:"left",label:"协议",prop:"agreement",width:"120"},{default:c((e=>[m(f(y(h)(e.row.agreement,le.value)),1)])),_:1}),n(E,{align:"left",label:"镜像仓库地址",prop:"mirror_address",width:"120"}),n(E,{align:"left",label:"驱动标识",prop:"driver_identification",width:"120"}),n(E,{align:"left",label:"版本",prop:"version",width:"120"}),n(E,{align:"left",label:"操作",fixed:"right","min-width":y($).operateMinWith},{default:c((e=>[b((o(),v(k,{type:"primary",link:"",class:"table-button",onClick:a=>De(e.row)},{default:c((()=>[n(L,{style:{"margin-right":"5px"}},{default:c((()=>[n(x)])),_:1}),a[20]||(a[20]=m("查看"))])),_:2},1032,["onClick"])),[[Se,y(X).info]]),b((o(),v(k,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await A({ID:e.ID});he.value="update",0===a.code&&(te.value=a.data,Ce.value=!0)})(e.row)},{default:c((()=>a[21]||(a[21]=[m("编辑")]))),_:2},1032,["onClick"])),[[Se,y(X).edit]]),b((o(),v(k,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void C.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{we(l)}));var l}},{default:c((()=>a[22]||(a[22]=[m("删除")]))),_:2},1032,["onClick"])),[[Se,y(X).delete]])])),_:1},8,["min-width"])])),_:1},8,["data"]),s("div",P,[n(be,{layout:"total, sizes, prev, pager, next, jumper","current-page":se.value,"page-size":ne.value,"page-sizes":[10,30,50,100],total:ue.value,onCurrentChange:_e,onSizeChange:ge},null,8,["current-page","page-size","total"])])])):u("",!0),n(xe,{"destroy-on-close":"",size:y($).drawerSize,modelValue:Ce.value,"onUpdate:modelValue":a[11]||(a[11]=e=>Ce.value=e),"show-close":!1,"before-close":ke},{header:c((()=>[s("div",F,[s("span",M,f("create"===he.value?"新增":"编辑"),1),s("div",null,[n(k,{loading:Z.value,type:"primary",onClick:Ve},{default:c((()=>a[23]||(a[23]=[m("确 定")]))),_:1},8,["loading"]),n(k,{onClick:ke},{default:c((()=>a[24]||(a[24]=[m("取 消")]))),_:1})])])])),default:c((()=>[n(B,{model:te.value,"label-position":"top",ref_key:"elFormRef",ref:oe,rules:re,"label-width":"80px"},{default:c((()=>[n(w,{label:"驱动名称:",prop:"driver_name"},{default:c((()=>[n(l,{modelValue:te.value.driver_name,"onUpdate:modelValue":a[5]||(a[5]=e=>te.value.driver_name=e),clearable:!0,placeholder:"请输入驱动名称"},null,8,["modelValue"])])),_:1}),n(w,{label:"协议:",prop:"agreement"},{default:c((()=>[n(Ue,{modelValue:te.value.agreement,"onUpdate:modelValue":a[6]||(a[6]=e=>te.value.agreement=e),placeholder:"请选择协议",style:{width:"100%"},filterable:"",clearable:!0},{default:c((()=>[(o(!0),i(p,null,_(le.value,((e,a)=>(o(),v(Te,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(w,{label:"镜像仓库地址:",prop:"mirror_address"},{default:c((()=>[n(l,{modelValue:te.value.mirror_address,"onUpdate:modelValue":a[7]||(a[7]=e=>te.value.mirror_address=e),clearable:!0,placeholder:"请输入镜像仓库地址"},null,8,["modelValue"])])),_:1}),n(w,{label:"驱动标识:",prop:"driver_identification"},{default:c((()=>[n(l,{modelValue:te.value.driver_identification,"onUpdate:modelValue":a[8]||(a[8]=e=>te.value.driver_identification=e),clearable:!0,placeholder:"请输入驱动标识"},null,8,["modelValue"])])),_:1}),n(w,{label:"版本:",prop:"version"},{default:c((()=>[n(l,{modelValue:te.value.version,"onUpdate:modelValue":a[9]||(a[9]=e=>te.value.version=e),clearable:!0,placeholder:"请输入版本"},null,8,["modelValue"])])),_:1}),n(w,{label:"描述:",prop:"description"},{default:c((()=>[n(T,{modelValue:te.value.description,"onUpdate:modelValue":a[10]||(a[10]=e=>te.value.description=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["size","modelValue"]),n(xe,{"destroy-on-close":"",size:y($).drawerSize,modelValue:Ae.value,"onUpdate:modelValue":a[13]||(a[13]=e=>Ae.value=e),"show-close":!0,"before-close":ze,title:"查看"},{default:c((()=>[n(je,{column:1,border:""},{default:c((()=>[n(Ie,{label:"驱动名称"},{default:c((()=>[m(f(Be.value.driver_name),1)])),_:1}),n(Ie,{label:"驱动类型"},{default:c((()=>[m(f(Be.value.driver_type),1)])),_:1}),n(Ie,{label:"镜像编号"},{default:c((()=>[m(f(Be.value.mirror_number),1)])),_:1}),n(Ie,{label:"协议"},{default:c((()=>[m(f(Be.value.agreement),1)])),_:1}),n(Ie,{label:"镜像仓库地址"},{default:c((()=>[m(f(Be.value.mirror_address),1)])),_:1}),n(Ie,{label:"驱动标识"},{default:c((()=>[m(f(Be.value.driver_identification),1)])),_:1}),n(Ie,{label:"版本"},{default:c((()=>[m(f(Be.value.version),1)])),_:1}),n(Ie,{label:"描述"},{default:c((()=>[n(U,{modelValue:Be.value.description,"onUpdate:modelValue":a[12]||(a[12]=e=>Be.value.description=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["size","modelValue"])]),"2"===te.value.driver_type?(o(),i("div",N,[s("div",null,[n(w,{label:"",prop:"driver_type"},{default:c((()=>[n(z,{modelValue:te.value.test_false,"onUpdate:modelValue":a[14]||(a[14]=e=>te.value.test_false=e),style:{width:"100%"}},{default:c((()=>[(o(!0),i(p,null,_(ae.value.slice(2),((e,a)=>(o(),v(D,{key:a,label:e.value},{default:c((()=>[m(f(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),"3"===te.value.test_false?(o(),i("div",R,[s("div",G,[(o(!0),i(p,null,_(Ee.value,((e,l)=>(o(),i("div",{class:"protocol-card",key:l,onClick:e=>{}},[s("div",J,[s("div",K,[n(k,{type:"primary",size:"small",class:"download-btn"},{default:c((()=>a[25]||(a[25]=[m("已下载")]))),_:1}),n(k,{type:"warning",size:"small",class:"open-btn"},{default:c((()=>a[26]||(a[26]=[m("开源")]))),_:1}),n(k,{type:"success",size:"small",class:"version-btn"},{default:c((()=>a[27]||(a[27]=[m("2.0版本")]))),_:1})])]),s("div",O,[s("img",{src:e.icon,alt:e.name,class:"protocol-icon"},null,8,Q),s("h3",Y,f(e.name),1)]),s("div",W,[n(k,{type:"primary",link:"",onClick:a=>(e=>{const a={gb28181:"https://doc.hummingbird.winc-link.com/guide/use-cases/access/gb28181-protocol.html",modbus:"https://doc.hummingbird.winc-link.com/guide/use-cases/access/modbus-protocol.html",tcp:"https://doc.hummingbird.winc-link.com/guide/use-cases/access/tcp-protocol.html",http:"https://doc.hummingbird.winc-link.com/guide/use-cases/access/http-protocol.html",mqtt:"https://doc.hummingbird.winc-link.com/guide/use-cases/access/mqtt-protocol.html"}[e];a&&window.open(a,"_blank")})(e.type)},{default:c((()=>a[28]||(a[28]=[m("手册")]))),_:2},1032,["onClick"])])],8,H)))),128))])])):u("",!0)])):u("",!0)])}}});export{L as default};
