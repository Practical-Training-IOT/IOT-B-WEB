/*! 
 Build based on gin-vue-admin 
 Time : 1746843967000 */
import{_ as a,a as e,r as l,k as t,l as s,c as n,b as o,f as r,d as c,i,n as u,t as d,w as p,m,g as h,F as f,p as g,u as w,o as b,h as v,E as x}from"./087AC4D233B64EB0index.CO5TVuii.js";import{c as y}from"./087AC4D233B64EB0initdb.Pbelak_P.js";import{_}from"./087AC4D233B64EB0bottomInfo.PuxRdU2d.js";const k={id:"userLayout",class:"w-full h-screen flex items-center justify-center bg-cover bg-center custom-bg relative overflow-hidden",style:{"background-image":"url('src/assets/loginback.png')"}},z={class:"w-full max-w-6xl h-[80vh] flex flex-col md:flex-row rounded-3xl overflow-hidden shadow-lg relative"},C={class:"mb-4 md:mb-8 text-center"},I=["src"],M={class:"text-xl md:text-2xl font-bold"},E={class:"flex gap-4"},V=["src"],L=a(Object.assign({name:"Login"},{__name:"index",setup(a){const L=w(),B=async()=>{const a=await g();N.captcha.push({max:a.data.captchaLength,min:a.data.captchaLength,message:"请输入".concat(a.data.captchaLength,"位验证码"),trigger:"blur"}),A.value=a.data.picPath,D.captchaId=a.data.captchaId,D.openCaptcha=a.data.openCaptcha};B();const j=e(null),A=e(""),D=l({username:"admin",password:"",captcha:"",captchaId:"",openCaptcha:!1}),N=l({username:[{validator:(a,e,l)=>{if(e.length<5)return l(new Error("请输入正确的用户名"));l()},trigger:"blur"}],password:[{validator:(a,e,l)=>{if(e.length<6)return l(new Error("请输入正确的密码"));l()},trigger:"blur"}],captcha:[{message:"验证码格式不正确",trigger:"blur"}]}),P=e(!1);function U(){P.value=!P.value}const F=t(),S=()=>{j.value.validate((async a=>{if(!a)return x({type:"error",message:"请正确填写登录信息",showClose:!0}),await B(),!1;return!!(await(async()=>await F.LoginIn(D))())||(await B(),!1)}))},q=async()=>{var a;const e=await y();0===e.code&&((null==(a=e.data)?void 0:a.needInit)?(F.NeedInit(),await L.push({name:"Init"})):x({type:"info",message:"已配置数据库信息，无法初始化"}))},G=e(null);return s((()=>{const a=G.value,e=a.getContext("2d");let l,t,s=[];let n=1,o=0,r=0;function c(){l=a.width=window.innerWidth,t=a.height=window.innerHeight}function i(){s=[];for(let a=0;a<300;a++){let a=Math.random()*l*2-l,e=Math.random()*t*2-t,n=Math.random()*l+800;s.push({x:a,y:e,z:n})}}function u(a,e,s){const n=l/2/(s+l);return{x:l/2+a*n,y:t/2+e*n,r:Math.max(.5,3-s/200),alpha:Math.min(1,.7+s/1600)}}c(),i(),function a(){e.fillStyle="rgba(0, 0, 20, 0.1)",e.fillRect(0,0,l,t);for(let c of s){c.z-=2*n,c.z<=0&&(c.z+=l);const a=c.x+o*c.z*.05,s=c.y+r*c.z*.05,i=u(a,s,c.z);if(i.x>=0&&i.x<=l&&i.y>=0&&i.y<=t&&(e.beginPath(),e.arc(i.x,i.y,i.r,0,2*Math.PI),e.fillStyle="rgba(255,255,255,".concat(i.alpha,")"),e.fill(),Math.random()>.9)){const l=u(a,s,c.z+5*Math.random());e.beginPath(),e.arc(l.x,l.y,.5*l.r,0,2*Math.PI),e.fillStyle="rgba(255,255,255,".concat(.3*i.alpha,")"),e.fill()}}requestAnimationFrame(a)}(),window.addEventListener("mousemove",(function(a){o=(a.clientX-l/2)/l,r=(a.clientY-t/2)/t})),window.addEventListener("wheel",(a=>{n+=-5e-4*a.deltaY,n=Math.max(.1,Math.min(10,n))})),window.addEventListener("resize",(()=>{c(),i()}))})),(a,e)=>{const l=h("el-input"),t=h("el-form-item"),s=h("el-button"),g=h("el-form");return b(),n(f,null,[o("div",k,[o("canvas",{ref_key:"canvasRef",ref:G,class:"absolute inset-0 w-full h-full z-0"},null,512),o("div",z,[o("div",{class:u(["w-full md:w-1/2 p-4 md:p-10 flex-grow glass-panel flex flex-col justify-center space-y-4 md:space-y-6",{hidden:P.value}])},[o("div",C,[o("img",{class:"w-24 mx-auto mb-6",src:a.$GIN_VUE_ADMIN.appLogo,alt:"logo"},null,8,I),o("h2",M,d(a.$GIN_VUE_ADMIN.appName),1)]),r(g,{ref_key:"loginForm",ref:j,model:D,rules:N,onKeyup:m(S,["enter"])},{default:p((()=>[r(t,{prop:"username",class:"mb-6"},{default:p((()=>[r(l,{modelValue:D.username,"onUpdate:modelValue":e[0]||(e[0]=a=>D.username=a),size:"large",placeholder:"邮箱账户或手机号","prefix-icon":"user",class:"input-glass"},null,8,["modelValue"])])),_:1}),r(t,{prop:"password",class:"mb-8"},{default:p((()=>[r(l,{modelValue:D.password,"onUpdate:modelValue":e[1]||(e[1]=a=>D.password=a),type:"password","show-password":"",size:"large",placeholder:"请输入密码","prefix-icon":"lock",class:"input-glass"},null,8,["modelValue"])])),_:1}),D.openCaptcha?(b(),i(t,{key:0,prop:"captcha",class:"mb-6"},{default:p((()=>[o("div",E,[r(l,{modelValue:D.captcha,"onUpdate:modelValue":e[2]||(e[2]=a=>D.captcha=a),placeholder:"验证码",size:"large",class:"flex-1"},null,8,["modelValue"]),o("div",{class:"captcha-image cursor-pointer",onClick:B},[A.value?(b(),n("img",{key:0,src:A.value,class:"h-12 rounded"},null,8,V)):c("",!0)])])])),_:1})):c("",!0),r(t,{class:"mb-6"},{default:p((()=>[r(s,{type:"primary",size:"large",class:"custom-wave-button w-full !h-12 shadow-lg hover:shadow-xl",onClick:S},{default:p((()=>e[3]||(e[3]=[v(" 开始使用 ")]))),_:1})])),_:1}),r(t,null,{default:p((()=>[r(s,{class:"w-full !h-12 bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 transition-all begin",onClick:q},{default:p((()=>e[4]||(e[4]=[v(" 首次使用？前往初始化 ")]))),_:1})])),_:1}),r(s,{type:"default",size:"large",class:"w-full !h-12 mt-4",onClick:U},{default:p((()=>[v(d(P.value?"展开表单":"收起表单"),1)])),_:1})])),_:1},8,["model","rules"])],2),!1===P.value?(b(),n("div",{key:0,class:u(["hidden md:block w-1/2 relative",{hidden:P.value}])},e[5]||(e[5]=[o("img",{src:"/assets/087AC4D233B64EB0loginright.C9ju2kqu.png",alt:"banner",class:"w-full h-full object-cover"},null,-1)]),2)):c("",!0),P.value?(b(),i(s,{key:1,type:"primary",circle:"",class:"fab-button absolute bottom-10 right-10 z-10",onClick:U},{default:p((()=>e[6]||(e[6]=[v(" + ")]))),_:1})):c("",!0)])]),r(_,{class:"left-0 right-0 absolute bottom-3 mx-auto w-full z-20"})],64)}}}),[["__scopeId","data-v-bcc53764"]]);export{L as default};
