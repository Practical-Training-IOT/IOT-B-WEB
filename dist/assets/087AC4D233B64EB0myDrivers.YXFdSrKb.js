/*! 
 Build based on gin-vue-admin 
 Time : 1746843967000 */
import{a as e,M as l,r as a,g as r,N as t,c as u,o as d,b as o,f as i,w as n,d as s,F as v,i as m,h as p,m as c,t as f,v as b,R as g,O as y,I as _,D as h,S as w,P as V,E as C}from"./087AC4D233B64EB0index.CO5TVuii.js";import{g as A,c as k,u as N,d as T}from"./087AC4D233B64EB0myDrivers.jtjtax34.js";import{u as z}from"./087AC4D233B64EB0btnAuth.C6tLskk0.js";const x={class:"gva-search-box"},U={class:"gva-table-box"},D={class:"gva-pagination"},I={class:"flex justify-between items-center"},B={class:"text-lg"},S=Object.assign({name:"MyDrivers"},{__name:"myDrivers",setup(S){const E=z(),j=e(!1),F=l(),M=e(!1),R=e([]),O=e([]),W=e({driverName:"",driverType:"",mirrorNumber:"",agreement:"",mirrorAddress:"",driverIdentification:"",version:"",description:""}),G=a({}),K=a({CreatedAt:[{validator:(e,l,a)=>{X.value.startCreatedAt&&!X.value.endCreatedAt?a(new Error("请填写结束日期")):!X.value.startCreatedAt&&X.value.endCreatedAt?a(new Error("请填写开始日期")):X.value.startCreatedAt&&X.value.endCreatedAt&&(X.value.startCreatedAt.getTime()===X.value.endCreatedAt.getTime()||X.value.startCreatedAt.getTime()>X.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),P=e(),q=e(),H=e(1),J=e(0),L=e(10),Q=e([]),X=e({}),Y=()=>{X.value={},le()},Z=()=>{var e;null==(e=q.value)||e.validate((async e=>{e&&(H.value=1,le())}))},$=e=>{L.value=e,le()},ee=e=>{H.value=e,le()},le=async()=>{const e=await A({page:H.value,pageSize:L.value,...X.value});0===e.code&&(Q.value=e.data.list,J.value=e.data.total,H.value=e.data.page,L.value=e.data.pageSize)};le();(async()=>{R.value=await w("drive_type"),O.value=await w("AgreementType")})();const ae=e([]),re=e=>{ae.value=e},te=e(""),ue=async e=>{0===(await T({ID:e.ID})).code&&(C({type:"success",message:"删除成功"}),1===Q.value.length&&H.value>1&&H.value--,le())},de=e(!1),oe=()=>{de.value=!1,W.value={driverName:"",driverType:"",mirrorNumber:"",agreement:"",mirrorAddress:"",driverIdentification:"",version:"",description:""}},ie=async()=>{var e;j.value=!0,null==(e=P.value)||e.validate((async e=>{if(!e)return j.value=!1;let l;switch(te.value){case"create":default:l=await k(W.value);break;case"update":l=await N(W.value)}j.value=!1,0===l.code&&(C({type:"success",message:"创建/更改成功"}),oe(),le())}))},ne=e({}),se=e(!1),ve=()=>{se.value=!1,ne.value={}};return(e,l)=>{const a=r("el-input"),w=r("el-form-item"),C=r("el-button"),A=r("el-form"),k=r("el-table-column"),N=r("el-table"),T=r("el-pagination"),z=r("el-option"),S=r("el-select"),le=r("el-drawer"),ae=r("el-descriptions-item"),me=r("el-descriptions"),pe=t("auth");return d(),u("div",null,[o("div",x,[i(A,{ref_key:"elSearchFormRef",ref:q,inline:!0,model:X.value,class:"demo-form-inline",rules:K,onKeyup:c(Z,["enter"])},{default:n((()=>[i(w,{label:"驱动名称",prop:"driverName"},{default:n((()=>[i(a,{modelValue:X.value.driverName,"onUpdate:modelValue":l[0]||(l[0]=e=>X.value.driverName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),M.value?(d(),u(v,{key:0},[],64)):s("",!0),i(w,null,{default:n((()=>[i(C,{type:"primary",icon:"search",onClick:Z},{default:n((()=>l[13]||(l[13]=[p("查询")]))),_:1}),i(C,{icon:"refresh",onClick:Y},{default:n((()=>l[14]||(l[14]=[p("重置")]))),_:1}),M.value?(d(),m(C,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:l[2]||(l[2]=e=>M.value=!1)},{default:n((()=>l[16]||(l[16]=[p("收起")]))),_:1})):(d(),m(C,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:l[1]||(l[1]=e=>M.value=!0)},{default:n((()=>l[15]||(l[15]=[p("展开")]))),_:1}))])),_:1})])),_:1},8,["model","rules"])]),o("div",U,[i(N,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Q.value,"row-key":"ID",onSelectionChange:re},{default:n((()=>[i(k,{type:"selection",width:"55"}),i(k,{align:"left",label:"镜像编号",prop:"mirrorNumber",width:"360"}),i(k,{align:"left",label:"驱动名称",prop:"driverName",width:"120"}),i(k,{align:"left",label:"版本",prop:"version",width:"120"}),i(k,{align:"left",label:"驱动类型",prop:"driverType",width:"120"},{default:n((e=>[p(f(b(g)(e.row.driverType,R.value)),1)])),_:1}),i(k,{sortable:"",align:"left",label:"创建日期",prop:"CreatedAt",width:"180"},{default:n((e=>[p(f(b(y)(e.row.CreatedAt)),1)])),_:1}),i(k,{align:"left",label:"操作",fixed:"right","min-width":b(F).operateMinWith},{default:n((e=>[_((d(),m(C,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void V.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ue(a)}));var a}},{default:n((()=>l[17]||(l[17]=[p("删除")]))),_:2},1032,["onClick"])),[[pe,b(E).delete]])])),_:1},8,["min-width"])])),_:1},8,["data"]),o("div",D,[i(T,{layout:"total, sizes, prev, pager, next, jumper","current-page":H.value,"page-size":L.value,"page-sizes":[10,30,50,100],total:J.value,onCurrentChange:ee,onSizeChange:$},null,8,["current-page","page-size","total"])])]),i(le,{"destroy-on-close":"",size:b(F).drawerSize,modelValue:de.value,"onUpdate:modelValue":l[11]||(l[11]=e=>de.value=e),"show-close":!1,"before-close":oe},{header:n((()=>[o("div",I,[o("span",B,f("create"===te.value?"新增":"编辑"),1),o("div",null,[i(C,{loading:j.value,type:"primary",onClick:ie},{default:n((()=>l[18]||(l[18]=[p("确 定")]))),_:1},8,["loading"]),i(C,{onClick:oe},{default:n((()=>l[19]||(l[19]=[p("取 消")]))),_:1})])])])),default:n((()=>[i(A,{model:W.value,"label-position":"top",ref_key:"elFormRef",ref:P,rules:G,"label-width":"80px"},{default:n((()=>[i(w,{label:"驱动名称:",prop:"driverName"},{default:n((()=>[i(a,{modelValue:W.value.driverName,"onUpdate:modelValue":l[3]||(l[3]=e=>W.value.driverName=e),clearable:!0,placeholder:"请输入驱动名称"},null,8,["modelValue"])])),_:1}),i(w,{label:"驱动类型:",prop:"driverType"},{default:n((()=>[i(S,{modelValue:W.value.driverType,"onUpdate:modelValue":l[4]||(l[4]=e=>W.value.driverType=e),placeholder:"请选择驱动类型",style:{width:"100%"},filterable:"",clearable:!0},{default:n((()=>[(d(!0),u(v,null,h(R.value,((e,l)=>(d(),m(z,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(w,{label:"镜像编号:",prop:"mirrorNumber"},{default:n((()=>[i(a,{modelValue:W.value.mirrorNumber,"onUpdate:modelValue":l[5]||(l[5]=e=>W.value.mirrorNumber=e),clearable:!0,placeholder:"请输入镜像编号"},null,8,["modelValue"])])),_:1}),i(w,{label:"协议:",prop:"agreement"},{default:n((()=>[i(S,{modelValue:W.value.agreement,"onUpdate:modelValue":l[6]||(l[6]=e=>W.value.agreement=e),placeholder:"请选择协议",style:{width:"100%"},filterable:"",clearable:!0},{default:n((()=>[(d(!0),u(v,null,h(O.value,((e,l)=>(d(),m(z,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(w,{label:"驱动镜像地址:",prop:"mirrorAddress"},{default:n((()=>[i(a,{modelValue:W.value.mirrorAddress,"onUpdate:modelValue":l[7]||(l[7]=e=>W.value.mirrorAddress=e),clearable:!0,placeholder:"请输入驱动镜像地址"},null,8,["modelValue"])])),_:1}),i(w,{label:"驱动标识:",prop:"driverIdentification"},{default:n((()=>[i(a,{modelValue:W.value.driverIdentification,"onUpdate:modelValue":l[8]||(l[8]=e=>W.value.driverIdentification=e),clearable:!0,placeholder:"请输入驱动标识"},null,8,["modelValue"])])),_:1}),i(w,{label:"版本:",prop:"version"},{default:n((()=>[i(a,{modelValue:W.value.version,"onUpdate:modelValue":l[9]||(l[9]=e=>W.value.version=e),clearable:!0,placeholder:"请输入版本"},null,8,["modelValue"])])),_:1}),i(w,{label:"描述:",prop:"description"},{default:n((()=>[i(a,{modelValue:W.value.description,"onUpdate:modelValue":l[10]||(l[10]=e=>W.value.description=e),clearable:!0,placeholder:"请输入描述"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["size","modelValue"]),i(le,{"destroy-on-close":"",size:b(F).drawerSize,modelValue:se.value,"onUpdate:modelValue":l[12]||(l[12]=e=>se.value=e),"show-close":!0,"before-close":ve,title:"查看"},{default:n((()=>[i(me,{column:1,border:""},{default:n((()=>[i(ae,{label:"驱动名称"},{default:n((()=>[p(f(ne.value.driverName),1)])),_:1}),i(ae,{label:"驱动类型"},{default:n((()=>[p(f(ne.value.driverType),1)])),_:1}),i(ae,{label:"镜像编号"},{default:n((()=>[p(f(ne.value.mirrorNumber),1)])),_:1}),i(ae,{label:"协议"},{default:n((()=>[p(f(ne.value.agreement),1)])),_:1}),i(ae,{label:"驱动镜像地址"},{default:n((()=>[p(f(ne.value.mirrorAddress),1)])),_:1}),i(ae,{label:"驱动标识"},{default:n((()=>[p(f(ne.value.driverIdentification),1)])),_:1}),i(ae,{label:"版本"},{default:n((()=>[p(f(ne.value.version),1)])),_:1}),i(ae,{label:"描述"},{default:n((()=>[p(f(ne.value.description),1)])),_:1})])),_:1})])),_:1},8,["size","modelValue"])])}}});export{S as default};
