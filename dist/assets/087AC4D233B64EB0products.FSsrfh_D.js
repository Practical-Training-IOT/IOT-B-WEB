/*! 
 Build based on gin-vue-admin 
 Time : 1746843967000 */
import{a as e,M as a,r as l,g as t,N as u,c as o,o as r,e as d,b as i,f as n,w as p,d as s,F as c,D as v,i as g,h as m,m as y,I as f,v as b,t as w,R as h,J as C,S as _,P as V,E as k}from"./087AC4D233B64EB0index.CO5TVuii.js";import{_ as z}from"./087AC4D233B64EB0resources.1e83Uicw.js";import{g as T,f as D,c as x,u as A,d as N,a as U,b as B}from"./087AC4D233B64EB0products.C1qzGeWe.js";import{_ as S}from"./087AC4D233B64EB0rich-edit.ylmqdvQl.js";import{_ as j}from"./087AC4D233B64EB0rich-view.B-1ov_xT.js";import{u as F}from"./087AC4D233B64EB0btnAuth.C6tLskk0.js";import"./087AC4D233B64EB0image.DZXThNBc.js";const I={class:"gva-search-box"},E={class:"gva-table-box"},P={class:"gva-btn-list"},q={class:"gva-pagination"},R={class:"flex justify-between items-center"},J={class:"text-lg"},K={key:0},M={class:"standard-category-container"},G={class:"gva-pagination"},O=Object.assign({name:"Products"},{__name:"products",setup(O){const W=F(),Y=e(!1),H=a(),L=e(!1),Q=e([]),X=e([]),Z=e([]),$=e([]),ee=e([]),ae=e([]),le=e({platform:"cloud",productName:"",category:"",selectCategory:"",nodeType:"",gatewayProtocol:"",dataFormat:"",networkType:"",factory:"",productDescription:"",productStatus:"",productCode:""}),te=l({productName:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],category:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],selectCategory:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],nodeType:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],gatewayProtocol:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],dataFormat:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],networkType:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),ue=l({CreatedAt:[{validator:(e,a,l)=>{se.value.startCreatedAt&&!se.value.endCreatedAt?l(new Error("请填写结束日期")):!se.value.startCreatedAt&&se.value.endCreatedAt?l(new Error("请填写开始日期")):se.value.startCreatedAt&&se.value.endCreatedAt&&(se.value.startCreatedAt.getTime()===se.value.endCreatedAt.getTime()||se.value.startCreatedAt.getTime()>se.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),oe=e(),re=e(),de=e(1),ie=e(0),ne=e(10),pe=e([]),se=e({}),ce=()=>{se.value={},ye()},ve=()=>{var e;null==(e=re.value)||e.validate((async e=>{e&&(de.value=1,ye())}))},ge=e=>{ne.value=e,ye()},me=e=>{de.value=e,ye()},ye=async()=>{const e=await T({page:de.value,pageSize:ne.value,...se.value});0===e.code&&(pe.value=e.data.list,ie.value=e.data.total,de.value=e.data.page,ne.value=e.data.pageSize)};ye();(async()=>{Q.value=await _("nodeType"),X.value=await _("gatewayProtocol"),Z.value=await _("dataFormat"),$.value=await _("platformType"),ee.value=await _("category"),ae.value=await _("networkType")})();const fe=e([]),be=e=>{fe.value=e},we=e(""),he=async e=>{0===(await N({ID:e.ID})).code&&(k({type:"success",message:"删除成功"}),1===pe.value.length&&de.value>1&&de.value--,ye())},Ce=e(!1),_e=()=>{Ce.value=!1,le.value={platform:"",productName:"",category:"",selectCategory:"",nodeType:"",gatewayProtocol:"",dataFormat:"",networkType:"",factory:"",productDescription:""}},Ve=async()=>{var e;Y.value=!0,null==(e=oe.value)||e.validate((async e=>{if(!e)return Y.value=!1;let a;switch(we.value){case"create":default:a=await x(le.value);break;case"update":a=await A(le.value)}Y.value=!1,0===a.code&&(k({type:"success",message:"创建/更改成功"}),_e(),ye())}))},ke=e({}),ze=e(!1),Te=async e=>{const a=await D({ID:e.ID});0===a.code&&(ke.value=a.data,ze.value=!0)},De=()=>{ze.value=!1,ke.value={}},xe=e(!1),Ae=e([]),Ne=e(1),Ue=e(10),Be=e(0);e(!1);const Se=async()=>{xe.value=!0,Ne.value=1,await Ee()},je=e=>{Ne.value=e,Ee()},Fe=e=>{Ue.value=e,Ne.value=1,Ee()},Ie=()=>{xe.value=!1},Ee=async()=>{const e=await U({page:Ne.value,pageSize:Ue.value});0===e.code?(Ae.value=e.data.list,Be.value=e.data.total):(Ae.value=[],Be.value=0)},Pe=e(!1),qe=e([]),Re=e(1),Je=e(10),Ke=e(0),Me=e(""),Ge=async()=>{try{const e=await B({CategoryName:Me.value,page:Re.value,pageSize:Je.value});0===e.code&&(qe.value=e.data.list,Ke.value=e.data.total,Re.value=e.data.page,Je.value=e.data.pageSize)}catch(e){k.error("获取属性列表失败")}},Oe=e=>{Re.value=e,Ge()},We=e=>{Je.value=e,Re.value=1,Ge()};return(e,a)=>{const l=t("el-option"),_=t("el-select"),T=t("el-form-item"),x=t("el-input"),A=t("el-button"),N=t("el-form"),U=t("el-table-column"),B=t("InfoFilled"),F=t("el-icon"),O=t("el-table"),ye=t("el-pagination"),fe=t("el-radio"),Ee=t("el-radio-group"),Ye=t("el-drawer"),He=t("el-descriptions-item"),Le=t("el-descriptions"),Qe=t("el-dialog"),Xe=u("auth");return r(),o(c,null,[a[33]||(a[33]=d('<div class="page-header"><div class="page-header-content"><div class="page-header-title"><h2>产品管理</h2><p>在物联网平台中，某一类具有相同能力或特征的设备的合集被称为一款产品。赢创万联已经打通了市面上主流iot云平台，可以把云平台产品数据同步到本地，第一次使用请点击数据同步按钮进行数据同步。</p></div><div class="page-header-image"><img src="'+z+'" alt="资源管理背景图"></div></div></div>',1)),i("div",null,[i("div",I,[n(N,{ref_key:"elSearchFormRef",ref:re,inline:!0,model:se.value,class:"demo-form-inline",rules:ue,onKeyup:y(ve,["enter"])},{default:p((()=>[n(T,{label:"存储平台",prop:"platform"},{default:p((()=>[n(_,{modelValue:se.value.platform,"onUpdate:modelValue":a[0]||(a[0]=e=>se.value.platform=e),clearable:"",filterable:"",placeholder:"云平台（全部）",onClear:a[1]||(a[1]=()=>{se.value.platform=void 0})},{default:p((()=>[(r(!0),o(c,null,v($.value,((e,a)=>(r(),g(l,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(T,{label:"产品名称",prop:"productName"},{default:p((()=>[n(x,{modelValue:se.value.productName,"onUpdate:modelValue":a[2]||(a[2]=e=>se.value.productName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),L.value?(r(),o(c,{key:0},[],64)):s("",!0),n(T,null,{default:p((()=>[n(A,{type:"primary",icon:"search",onClick:ve},{default:p((()=>a[21]||(a[21]=[m("查询")]))),_:1}),n(A,{icon:"refresh",onClick:ce},{default:p((()=>a[22]||(a[22]=[m("重置")]))),_:1}),L.value?(r(),g(A,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:a[4]||(a[4]=e=>L.value=!1)},{default:p((()=>a[24]||(a[24]=[m("收起")]))),_:1})):(r(),g(A,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:a[3]||(a[3]=e=>L.value=!0)},{default:p((()=>a[23]||(a[23]=[m("展开")]))),_:1}))])),_:1})])),_:1},8,["model","rules"])]),i("div",E,[i("div",P,[f((r(),g(A,{type:"primary",icon:"plus",onClick:a[5]||(a[5]=e=>(we.value="create",void(Ce.value=!0)))},{default:p((()=>a[25]||(a[25]=[m("新增")]))),_:1})),[[Xe,b(W).add]])]),n(O,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:pe.value,"row-key":"ID",onSelectionChange:be},{default:p((()=>[n(U,{type:"selection",width:"55"}),n(U,{align:"left",label:"产品ID",prop:"ID",width:"120"}),n(U,{align:"left",label:"产品名称",prop:"productName",width:"120"}),n(U,{align:"left",label:"产品编号",prop:"productCode",width:"300"}),n(U,{align:"left",label:"类型",prop:"nodeType",width:"120"},{default:p((e=>[m(w(b(h)(e.row.nodeType,Q.value)),1)])),_:1}),n(U,{align:"left",label:"创建时间",prop:"CreatedAt",width:"250"}),n(U,{align:"left",label:"状态",prop:"productStatus",width:"120"}),n(U,{align:"left",label:"操作",fixed:"right","min-width":b(H).operateMinWith},{default:p((e=>[f((r(),g(A,{type:"primary",link:"",class:"table-button",onClick:a=>Te(e.row)},{default:p((()=>[n(F,{style:{"margin-right":"5px"}},{default:p((()=>[n(B)])),_:1}),a[26]||(a[26]=m("查看"))])),_:2},1032,["onClick"])),[[Xe,b(W).info]]),f((r(),g(A,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await D({ID:e.ID});we.value="update",0===a.code&&(le.value=a.data,Ce.value=!0)})(e.row)},{default:p((()=>a[27]||(a[27]=[m("编辑")]))),_:2},1032,["onClick"])),[[Xe,b(W).edit]]),f((r(),g(A,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void V.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{he(l)}));var l}},{default:p((()=>a[28]||(a[28]=[m("删除")]))),_:2},1032,["onClick"])),[[Xe,b(W).delete]])])),_:1},8,["min-width"])])),_:1},8,["data"]),i("div",q,[n(ye,{layout:"total, sizes, prev, pager, next, jumper","current-page":de.value,"page-size":ne.value,"page-sizes":[10,30,50,100],total:ie.value,onCurrentChange:me,onSizeChange:ge},null,8,["current-page","page-size","total"])])]),n(Ye,{"destroy-on-close":"",size:b(H).drawerSize,modelValue:Ce.value,"onUpdate:modelValue":a[16]||(a[16]=e=>Ce.value=e),"show-close":!1,"before-close":_e},{header:p((()=>[i("div",R,[i("span",J,w("create"===we.value?"新增":"编辑"),1),i("div",null,[n(A,{loading:Y.value,type:"primary",onClick:Ve},{default:p((()=>a[29]||(a[29]=[m("确 定")]))),_:1},8,["loading"]),n(A,{onClick:_e},{default:p((()=>a[30]||(a[30]=[m("取 消")]))),_:1})])])])),default:p((()=>[n(N,{model:le.value,"label-position":"top",ref_key:"elFormRef",ref:oe,rules:te,"label-width":"80px"},{default:p((()=>[f(n(T,{label:"存储平台:",prop:"platform"},{default:p((()=>[n(_,{modelValue:le.value.platform,"onUpdate:modelValue":a[6]||(a[6]=e=>le.value.platform=e),placeholder:"请选择存储平台",style:{width:"100%"},filterable:"",clearable:!0},{default:p((()=>[(r(!0),o(c,null,v($.value,((e,a)=>(r(),g(l,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},512),[[C,!1]]),n(T,{label:"产品名称:",prop:"productName"},{default:p((()=>[n(x,{modelValue:le.value.productName,"onUpdate:modelValue":a[7]||(a[7]=e=>le.value.productName=e),clearable:!0,placeholder:"请输入产品名称"},null,8,["modelValue"])])),_:1}),n(T,{label:"所属品类:",prop:"category"},{default:p((()=>[n(Ee,{modelValue:le.value.category,"onUpdate:modelValue":a[8]||(a[8]=e=>le.value.category=e),style:{width:"100%"},onChange:e.handleCategoryChange},{default:p((()=>[(r(!0),o(c,null,v(ee.value,((e,a)=>(r(),g(fe,{key:a,label:e.value,value:e.value,style:{"margin-right":"10px","margin-bottom":"10px"}},{default:p((()=>[m(w(e.label),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),"1"===le.value.category?(r(),o("div",K,[n(T,{label:"选择标准品类:",prop:"selectCategory"},{default:p((()=>[n(x,{modelValue:le.value.selectCategory,"onUpdate:modelValue":a[9]||(a[9]=e=>le.value.selectCategory=e),clearable:!0,placeholder:"选择标准品类",onClick:Se,readonly:"",disabled:xe.value},null,8,["modelValue","disabled"])])),_:1})])):s("",!0),n(T,{label:"节点类型:",prop:"nodeType"},{default:p((()=>[n(_,{modelValue:le.value.nodeType,"onUpdate:modelValue":a[10]||(a[10]=e=>le.value.nodeType=e),placeholder:"请选择节点类型",style:{width:"100%"},filterable:"",clearable:!0},{default:p((()=>[(r(!0),o(c,null,v(Q.value,((e,a)=>(r(),g(l,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(T,{label:"接入网关协议:",prop:"gatewayProtocol"},{default:p((()=>[n(_,{modelValue:le.value.gatewayProtocol,"onUpdate:modelValue":a[11]||(a[11]=e=>le.value.gatewayProtocol=e),placeholder:"请选择接入网关协议",style:{width:"100%"},filterable:"",clearable:!0},{default:p((()=>[(r(!0),o(c,null,v(X.value,((e,a)=>(r(),g(l,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(T,{label:"数据格式:",prop:"dataFormat"},{default:p((()=>[n(_,{modelValue:le.value.dataFormat,"onUpdate:modelValue":a[12]||(a[12]=e=>le.value.dataFormat=e),placeholder:"请选择数据格式",style:{width:"100%"},filterable:"",clearable:!0},{default:p((()=>[(r(!0),o(c,null,v(Z.value,((e,a)=>(r(),g(l,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(T,{label:"网络类型:",prop:"networkType"},{default:p((()=>[n(Ee,{modelValue:le.value.networkType,"onUpdate:modelValue":a[13]||(a[13]=e=>le.value.networkType=e),style:{display:"flex","align-items":"center"}},{default:p((()=>[(r(!0),o(c,null,v(ae.value,((e,a)=>(r(),g(fe,{key:a,label:e.value,style:{"margin-right":"10px"}},{default:p((()=>[m(w(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(T,{label:"工厂:",prop:"factory"},{default:p((()=>[n(x,{modelValue:le.value.factory,"onUpdate:modelValue":a[14]||(a[14]=e=>le.value.factory=e),clearable:!0,placeholder:"请输入工厂"},null,8,["modelValue"])])),_:1}),n(T,{label:"产品描述:",prop:"productDescription"},{default:p((()=>[n(S,{modelValue:le.value.productDescription,"onUpdate:modelValue":a[15]||(a[15]=e=>le.value.productDescription=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["size","modelValue"]),n(Ye,{"destroy-on-close":"",size:b(H).drawerSize,modelValue:ze.value,"onUpdate:modelValue":a[18]||(a[18]=e=>ze.value=e),"show-close":!0,"before-close":De,title:"查看"},{default:p((()=>[n(Le,{column:1,border:""},{default:p((()=>[n(He,{label:"存储平台"},{default:p((()=>[m(w(ke.value.platform),1)])),_:1}),n(He,{label:"产品名称"},{default:p((()=>[m(w(ke.value.productName),1)])),_:1}),n(He,{label:"所属品类"},{default:p((()=>[m(w(ke.value.category),1)])),_:1}),n(He,{label:"选择标准品类"},{default:p((()=>[m(w(ke.value.selectCategory),1)])),_:1}),n(He,{label:"节点类型"},{default:p((()=>[m(w(ke.value.nodeType),1)])),_:1}),n(He,{label:"接入网关协议"},{default:p((()=>[m(w(ke.value.gatewayProtocol),1)])),_:1}),n(He,{label:"数据格式"},{default:p((()=>[m(w(ke.value.dataFormat),1)])),_:1}),n(He,{label:"网络类型"},{default:p((()=>[m(w(ke.value.networkType),1)])),_:1}),n(He,{label:"工厂"},{default:p((()=>[m(w(ke.value.factory),1)])),_:1}),n(He,{label:"产品描述"},{default:p((()=>[n(j,{modelValue:ke.value.productDescription,"onUpdate:modelValue":a[17]||(a[17]=e=>ke.value.productDescription=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["size","modelValue"]),n(Qe,{modelValue:xe.value,"onUpdate:modelValue":a[19]||(a[19]=e=>xe.value=e),title:"选择标准品类",width:"60%","before-close":Ie},{default:p((()=>[i("div",M,[n(O,{data:Ae.value,style:{width:"100%"}},{default:p((()=>[n(U,{prop:"CategoryName",label:"品类名称"}),n(U,{prop:"Scene",label:"所属场景"}),n(U,{fixed:"right",label:"操作",width:"200"},{default:p((e=>[n(A,{type:"primary",link:"",onClick:a=>{return l=e.row,le.value.selectCategory=l.CategoryName,void(xe.value=!1);var l}},{default:p((()=>a[31]||(a[31]=[m("选择")]))),_:2},1032,["onClick"]),n(A,{type:"primary",link:"",onClick:a=>(async e=>{try{Me.value=e,Re.value=1,await Ge(),Pe.value=!0}catch(a){k.error("获取属性列表失败")}})(e.row.CategoryName)},{default:p((()=>a[32]||(a[32]=[m("查看标准物模型")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n(ye,{style:{"margin-top":"16px","text-align":"right"},background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":Ne.value,"page-size":Ue.value,"page-sizes":[10,20,50,100],total:Be.value,onCurrentChange:je,onSizeChange:Fe},null,8,["current-page","page-size","total"])])])),_:1},8,["modelValue"]),n(Qe,{modelValue:Pe.value,"onUpdate:modelValue":a[20]||(a[20]=e=>Pe.value=e),title:"標準功能定義",width:"80%","destroy-on-close":""},{default:p((()=>[n(O,{data:qe.value,style:{width:"100%"},border:""},{default:p((()=>[n(U,{prop:"name",label:"功能名称"}),n(U,{prop:"code",label:"标识符"}),n(U,{prop:"data_type",label:"数据类型"}),n(U,{prop:"unit",label:"单位"})])),_:1},8,["data"]),i("div",G,[n(ye,{layout:"total, sizes, prev, pager, next, jumper","current-page":Re.value,"page-size":Je.value,"page-sizes":[10,30,50,100],total:Ke.value,onCurrentChange:Oe,onSizeChange:We},null,8,["current-page","page-size","total"])])])),_:1},8,["modelValue"])])],64)}}});export{O as default};
