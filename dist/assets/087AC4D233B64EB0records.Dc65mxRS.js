/*! 
 Build based on gin-vue-admin 
 Time : 1746843967000 */
import{a as e,M as l,r as a,g as t,N as u,c as r,o as d,b as o,f as i,w as s,d as n,h as c,F as p,i as v,m,I as g,v as f,t as b,O as y,P as h,E as w}from"./087AC4D233B64EB0index.CO5TVuii.js";import{g as C,f as _,c as V,u as T,d as k,a as A}from"./087AC4D233B64EB0records.CPdQEAVz.js";import{u as D}from"./087AC4D233B64EB0btnAuth.C6tLskk0.js";const x={class:"gva-search-box"},z={class:"gva-table-box"},I={class:"gva-btn-list"},B={class:"gva-pagination"},R={class:"flex justify-between items-center"},U={class:"text-lg"},N=Object.assign({name:"Records"},{__name:"records",setup(N){const E=D(),L=e(!1),S=l(),j=e(!1),F=e({ruleName:"",ruleLevel:"",triggeringTime:new Date,processingTime:new Date,status:"",processResult:""}),M=a({}),O=a({CreatedAt:[{validator:(e,l,a)=>{H.value.startCreatedAt&&!H.value.endCreatedAt?a(new Error("请填写结束日期")):!H.value.startCreatedAt&&H.value.endCreatedAt?a(new Error("请填写开始日期")):H.value.startCreatedAt&&H.value.endCreatedAt&&(H.value.startCreatedAt.getTime()===H.value.endCreatedAt.getTime()||H.value.startCreatedAt.getTime()>H.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),G=e(),K=e(),P=e(1),Q=e(0),W=e(10),q=e([]),H=e({}),J=()=>{H.value={},$()},X=()=>{var e;null==(e=K.value)||e.validate((async e=>{e&&(P.value=1,$())}))},Y=e=>{W.value=e,$()},Z=e=>{P.value=e,$()},$=async()=>{const e=await C({page:P.value,pageSize:W.value,...H.value});0===e.code&&(q.value=e.data.list,Q.value=e.data.total,P.value=e.data.page,W.value=e.data.pageSize)};$();(async()=>{})();const ee=e([]),le=e=>{ee.value=e},ae=async()=>{h.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];if(0===ee.value.length)return void w({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((l=>{e.push(l.ID)}));0===(await A({IDs:e})).code&&(w({type:"success",message:"删除成功"}),q.value.length===e.length&&P.value>1&&P.value--,$())}))},te=e(""),ue=async e=>{0===(await k({ID:e.ID})).code&&(w({type:"success",message:"删除成功"}),1===q.value.length&&P.value>1&&P.value--,$())},re=e(!1),de=()=>{re.value=!1,F.value={ruleName:"",ruleLevel:"",triggeringTime:new Date,processingTime:new Date,status:"",processResult:""}},oe=async()=>{var e;L.value=!0,null==(e=G.value)||e.validate((async e=>{if(!e)return L.value=!1;let l;switch(te.value){case"create":default:l=await V(F.value);break;case"update":l=await T(F.value)}L.value=!1,0===l.code&&(w({type:"success",message:"创建/更改成功"}),de(),$())}))},ie=e({}),se=e(!1),ne=async e=>{const l=await _({ID:e.ID});0===l.code&&(ie.value=l.data,se.value=!0)},ce=()=>{se.value=!1,ie.value={}};return(e,l)=>{const a=t("QuestionFilled"),w=t("el-icon"),C=t("el-tooltip"),V=t("el-date-picker"),T=t("el-form-item"),k=t("el-button"),A=t("el-form"),D=t("el-table-column"),N=t("InfoFilled"),$=t("el-table"),pe=t("el-pagination"),ve=t("el-input"),me=t("el-drawer"),ge=t("el-descriptions-item"),fe=t("el-descriptions"),be=u("auth");return d(),r("div",null,[o("div",x,[i(A,{ref_key:"elSearchFormRef",ref:K,inline:!0,model:H.value,class:"demo-form-inline",rules:O,onKeyup:m(X,["enter"])},{default:s((()=>[i(T,{label:"创建日期",prop:"CreatedAt"},{label:s((()=>[o("span",null,[l[13]||(l[13]=c(" 创建日期 ")),i(C,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:s((()=>[i(w,null,{default:s((()=>[i(a)])),_:1})])),_:1})])])),default:s((()=>[i(V,{modelValue:H.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!H.value.endCreatedAt&&e.getTime()>H.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),l[14]||(l[14]=c(" — ")),i(V,{modelValue:H.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>H.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!H.value.startCreatedAt&&e.getTime()<H.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),j.value?(d(),r(p,{key:0},[],64)):n("",!0),i(T,null,{default:s((()=>[i(k,{type:"primary",icon:"search",onClick:X},{default:s((()=>l[15]||(l[15]=[c("查询")]))),_:1}),i(k,{icon:"refresh",onClick:J},{default:s((()=>l[16]||(l[16]=[c("重置")]))),_:1}),j.value?(d(),v(k,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:l[3]||(l[3]=e=>j.value=!1)},{default:s((()=>l[18]||(l[18]=[c("收起")]))),_:1})):(d(),v(k,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:l[2]||(l[2]=e=>j.value=!0)},{default:s((()=>l[17]||(l[17]=[c("展开")]))),_:1}))])),_:1})])),_:1},8,["model","rules"])]),o("div",z,[o("div",I,[g((d(),v(k,{type:"primary",icon:"plus",onClick:l[4]||(l[4]=e=>(te.value="create",void(re.value=!0)))},{default:s((()=>l[19]||(l[19]=[c("新增")]))),_:1})),[[be,f(E).add]]),g((d(),v(k,{icon:"delete",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:ae},{default:s((()=>l[20]||(l[20]=[c("删除")]))),_:1},8,["disabled"])),[[be,f(E).batchDelete]])]),i($,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:q.value,"row-key":"ID",onSelectionChange:le},{default:s((()=>[i(D,{type:"selection",width:"55"}),i(D,{sortable:"",align:"left",label:"日期",prop:"CreatedAt",width:"180"},{default:s((e=>[c(b(f(y)(e.row.CreatedAt)),1)])),_:1}),i(D,{align:"left",label:"告警规则名称",prop:"ruleName",width:"120"}),i(D,{align:"left",label:"告警等级",prop:"ruleLevel",width:"120"}),i(D,{align:"left",label:"触发时间",prop:"triggeringTime",width:"180"},{default:s((e=>[c(b(f(y)(e.row.triggeringTime)),1)])),_:1}),i(D,{align:"left",label:"处理时间",prop:"processingTime",width:"180"},{default:s((e=>[c(b(f(y)(e.row.processingTime)),1)])),_:1}),i(D,{align:"left",label:"告警状态",prop:"status",width:"120"}),i(D,{align:"left",label:"处理结果",prop:"processResult",width:"120"}),i(D,{align:"left",label:"操作",fixed:"right","min-width":f(S).operateMinWith},{default:s((e=>[g((d(),v(k,{type:"primary",link:"",class:"table-button",onClick:l=>ne(e.row)},{default:s((()=>[i(w,{style:{"margin-right":"5px"}},{default:s((()=>[i(N)])),_:1}),l[21]||(l[21]=c("查看"))])),_:2},1032,["onClick"])),[[be,f(E).info]]),g((d(),v(k,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await _({ID:e.ID});te.value="update",0===l.code&&(F.value=l.data,re.value=!0)})(e.row)},{default:s((()=>l[22]||(l[22]=[c("编辑")]))),_:2},1032,["onClick"])),[[be,f(E).edit]]),g((d(),v(k,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void h.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ue(a)}));var a}},{default:s((()=>l[23]||(l[23]=[c("删除")]))),_:2},1032,["onClick"])),[[be,f(E).delete]])])),_:1},8,["min-width"])])),_:1},8,["data"]),o("div",B,[i(pe,{layout:"total, sizes, prev, pager, next, jumper","current-page":P.value,"page-size":W.value,"page-sizes":[10,30,50,100],total:Q.value,onCurrentChange:Z,onSizeChange:Y},null,8,["current-page","page-size","total"])])]),i(me,{"destroy-on-close":"",size:f(S).drawerSize,modelValue:re.value,"onUpdate:modelValue":l[11]||(l[11]=e=>re.value=e),"show-close":!1,"before-close":de},{header:s((()=>[o("div",R,[o("span",U,b("create"===te.value?"新增":"编辑"),1),o("div",null,[i(k,{loading:L.value,type:"primary",onClick:oe},{default:s((()=>l[24]||(l[24]=[c("确 定")]))),_:1},8,["loading"]),i(k,{onClick:de},{default:s((()=>l[25]||(l[25]=[c("取 消")]))),_:1})])])])),default:s((()=>[i(A,{model:F.value,"label-position":"top",ref_key:"elFormRef",ref:G,rules:M,"label-width":"80px"},{default:s((()=>[i(T,{label:"告警规则名称:",prop:"ruleName"},{default:s((()=>[i(ve,{modelValue:F.value.ruleName,"onUpdate:modelValue":l[5]||(l[5]=e=>F.value.ruleName=e),clearable:!0,placeholder:"请输入告警规则名称"},null,8,["modelValue"])])),_:1}),i(T,{label:"告警等级:",prop:"ruleLevel"},{default:s((()=>[i(ve,{modelValue:F.value.ruleLevel,"onUpdate:modelValue":l[6]||(l[6]=e=>F.value.ruleLevel=e),clearable:!0,placeholder:"请输入告警等级"},null,8,["modelValue"])])),_:1}),i(T,{label:"触发时间:",prop:"triggeringTime"},{default:s((()=>[i(V,{modelValue:F.value.triggeringTime,"onUpdate:modelValue":l[7]||(l[7]=e=>F.value.triggeringTime=e),type:"date",style:{width:"100%"},placeholder:"选择日期",clearable:!0},null,8,["modelValue"])])),_:1}),i(T,{label:"处理时间:",prop:"processingTime"},{default:s((()=>[i(V,{modelValue:F.value.processingTime,"onUpdate:modelValue":l[8]||(l[8]=e=>F.value.processingTime=e),type:"date",style:{width:"100%"},placeholder:"选择日期",clearable:!0},null,8,["modelValue"])])),_:1}),i(T,{label:"告警状态:",prop:"status"},{default:s((()=>[i(ve,{modelValue:F.value.status,"onUpdate:modelValue":l[9]||(l[9]=e=>F.value.status=e),clearable:!0,placeholder:"请输入告警状态"},null,8,["modelValue"])])),_:1}),i(T,{label:"处理结果:",prop:"processResult"},{default:s((()=>[i(ve,{modelValue:F.value.processResult,"onUpdate:modelValue":l[10]||(l[10]=e=>F.value.processResult=e),clearable:!0,placeholder:"请输入处理结果"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["size","modelValue"]),i(me,{"destroy-on-close":"",size:f(S).drawerSize,modelValue:se.value,"onUpdate:modelValue":l[12]||(l[12]=e=>se.value=e),"show-close":!0,"before-close":ce,title:"查看"},{default:s((()=>[i(fe,{column:1,border:""},{default:s((()=>[i(ge,{label:"告警规则名称"},{default:s((()=>[c(b(ie.value.ruleName),1)])),_:1}),i(ge,{label:"告警等级"},{default:s((()=>[c(b(ie.value.ruleLevel),1)])),_:1}),i(ge,{label:"触发时间"},{default:s((()=>[c(b(ie.value.triggeringTime),1)])),_:1}),i(ge,{label:"处理时间"},{default:s((()=>[c(b(ie.value.processingTime),1)])),_:1}),i(ge,{label:"告警状态"},{default:s((()=>[c(b(ie.value.status),1)])),_:1}),i(ge,{label:"处理结果"},{default:s((()=>[c(b(ie.value.processResult),1)])),_:1})])),_:1})])),_:1},8,["size","modelValue"])])}}});export{N as default};
